# ğŸ˜ƒvega_Stacked-bar-chart
1.stacked-bar-chart
2.è³‡æ–™æ ¼å¼:
{      # #ä»¥**$schema**å®šç¾©æ¶æ§‹ä¾†æº
  "$schema": "https://vega.github.io/schema/vega/v5.json",
  "description": "A basic stacked bar chart example.",
  "width": 500,     #è¨­å®šåœ–è¡¨xè»¸å¯¬åº¦#
  "height": 200,    #è¨­å®šåœ–è¡¨yè»¸é«˜åº¦#
  "padding": 5,       #è¨­å®šè¦–åœ–é‚Šæ¡†ä¹‹é–“çš„é‚Šè·ï¼Œé€é padding çš„ä¾†é”åˆ°æ°´å¹³åŠå‚ç›´ç½®ä¸­çš„æ•ˆæœ#
  "data": [             #è¨­å®šè³‡æ–™ä¾†æº "æ•¸æ“šé›†"[{"name":"åœ–è¡¨åç¨±","values":[{},{}]}]#
    {
      "name": "table",  **#åœ–è¡¨åç¨±(å¯è‡ªå®šç¾©)#**
      "values": [        **#åœ–è¡¨å€¼ "valuesâ€(å¯ä½¿ç”¨**`values/url/source`**):[]   #"xè»¸æ¬„ä½åç¨±":"xè»¸ç‰©ä»¶é …ç›®æ¨™ç±¤","yè»¸æ¬„ä½åç¨±":"yè»¸ç‰©ä»¶é …ç›®æ¨™ç±¤â€,â€é…ç½®**å€å¡Šè¨­å®šé¡è‰²**â€: 0åŸå§‹é¡è‰²/1æ©˜è‰²**
        {"x": 0, "y": 28, "c": 0}, {"x": 0, "y": 55, "c": 1},    
        {"x": 1, "y": 43, "c": 0}, {"x": 1, "y": 91, "c": 1},
        {"x": 2, "y": 81, "c": 0}, {"x": 2, "y": 53, "c": 1},
        {"x": 3, "y": 19, "c": 0}, {"x": 3, "y": 87, "c": 1},
        {"x": 4, "y": 52, "c": 0}, {"x": 4, "y": 48, "c": 1},
        {"x": 5, "y": 24, "c": 0}, {"x": 5, "y": 49, "c": 1},
        {"x": 6, "y": 87, "c": 0}, {"x": 6, "y": 66, "c": 1},
        {"x": 7, "y": 17, "c": 0}, {"x": 7, "y": 27, "c": 1},
        {"x": 8, "y": 68, "c": 0}, {"x": 8, "y": 16, "c": 1},
        {"x": 9, "y": 49, "c": 0}, {"x": 9, "y": 15, "c": 1}
      ],
      â€œtransform": [     #æ•¸æ“šè½‰æ›
        {
          "type": "stack",   #å®šç¾©æ•¸æ“šé¡å‹:å †ç–Š
          "groupby": ["x"],  #çµ„åˆ:[**xè»¸æ¬„ä½ç‰©ä»¶åç¨±]**
          "sort": {"field": "c"}, #æ’åº:{æ•¸æ“šå°æ‡‰éµ:cé¡è‰²}
          "field": "y"    #æ•¸æ“šå°æ‡‰éµå:yæ•¸æ“šå€¼
        }
      ]
    }
  ],
  "scales": [   #å®šç¾©åº§æ¨™è¡¨ç¤º**æ¯”ä¾‹å°ºï¼Œè¨­å®šå‚ç›´åŠæ°´å¹³è»¸ï¼Œ**è½‰æ›æ•¸æ“šç‚ºåœ–è¡¨(ç¸®æ”¾å‡½æ•¸å°‡æ•¸æ“šå€¼æ˜ å°„åˆ°è¦–è¦ºå€¼)
    {
      "name": "x",    #è¨­å®šxè»¸æ¯”ä¾‹å°ºç‰©ä»¶åç¨±:x
      "type": â€œband",   #é¡å‹
      "range": "width",  #ç¯„åœ:åœ–è¡¨å¯¬åº¦(width/height)
      "domain": {"data": "table", "field": "x"}  #"è³‡æ–™æº":{"è³‡æ–™ä¾†æº":"åœ–è¡¨åç¨±","**field**":â€**xè»¸æ¬„ä½ç‰©ä»¶åç¨±**"}
    },
    {
      "name": "y",     #è¨­å®šxè»¸æ¯”ä¾‹å°ºç‰©ä»¶åç¨±:y
      "type": "linear",   #é¡å‹ç·šæ€§
      "range": "height",  #ç¯„åœ:åœ–è¡¨å¯¬åº¦(width/height)
      "nice": true, â€œzero": true,      #æ¨™ç±¤é‚Šè·è¨­ç½®"nice": true, â€œzero": trueç¦ç”¨æ­¤åŠŸèƒ½
      "domain": {"data": "table", "field": "y1"}  #â€å®šé‡ç¯„åœ":{"è³‡æ–™ä¾†æº":"åœ–è¡¨åç¨±","**field**":"y**è»¸é …ç›®æ¨™ç±¤çš„****å€¼**"}
    },
    {
      "name": "color",   #è¨­å®šç‰©ä»¶åç¨±:color
      "type": â€œordinal",   #é¡å‹åºæ•¸æ¯”ä¾‹å°º (å¯ä»¥ä½¿ç”¨éæ•¸å­—çš„å€¼)
      â€œrange": â€œcategory", #ç¯„åœ:category
      "domain": {"data": "table", "field": "c"}  #"å®šé‡ç¯„åœ":{"è³‡æ–™ä¾†æº":"åœ–è¡¨åç¨±","**field**":"cé¡è‰²"}
    }
  ],
  "axes": [    #å®šç¾©åº§æ¨™è»¸æ¨™ç±¤çš„ä¸Šä¸‹å·¦å³ä½ç½®
    {"orient": "bottom", "scale": "x", "zindex": 1},   #**orient:åº•éƒ¨,scale:**xè»¸æ¯”ä¾‹,å †å å±¤ç´šé¡¯ç¤º
    {"orient": "left", "scale": "y", "zindex": 1} #**orient:å·¦é‚Š,scale:y**è»¸æ¯”ä¾‹,å †å å±¤ç´šé¡¯ç¤º
  ],
  "marks": [   #å®šç¾©æ¨™è¨˜(ä½ç½®ã€å¤§å°ã€å½¢ç‹€å’Œé¡è‰²)
    {
      "type": "rect",  #é¡å‹é¸é …ï¼šçŸ©å½¢
      "from": {"data": "table"},   #å¾:{è³‡æ–™æº:åœ–è¡¨}
      "encode": {
        "enter": {    #enteræ˜¯è³‡æ–™çš„æ–¹å¼
          "x": {â€œscale": "x", â€œfield": "x"},  #xè»¸é…ç½®é …ç›®ä¸­(æ°´å¹³ä½ç½®),ä½¿ç”¨**scaleæ‡‰ç”¨æ–¼x**ä»¥ç²å¾—x
          "width": {"scale": "x", "band": 1, â€œoffset": -1},    #å¯¬åº¦ä½ç½®:ä½¿ç”¨**scaleæ‡‰ç”¨æ–¼x**,`"band": 1`æª¢ç´¢åˆ»åº¦å¸¶çš„å®Œæ•´å¤§å°(é è¨­1),offset**çŸ©å½¢**åº§æ¨™çš„åç§»ä½ç½®(é è¨­-1)
          "y": {"scale": "y", "field": "y0"},     #yè»¸é…ç½®é …ç›®ä¸­(è¨­ç½®å‚ç›´è»¸ï¼Œå®šç¾©çŸ©å½¢é ‚éƒ¨:),ä½¿ç”¨**scaleæ‡‰ç”¨æ–¼y**ä»¥ç²å¾—y0
          "y2": {"scale": "y", "field": "y1"},   #y2çµ‚é»è»¸é…ç½®é …ç›®ä¸­(è¨­ç½®y2å‚ç›´è»¸é«˜åº¦ï¼Œå®šç¾©çŸ©å½¢åº•éƒ¨),ä½¿ç”¨**scaleæ‡‰ç”¨æ–¼y**ä»¥ç²å¾—y1
          "fill": {"scale": "color", "field": "c"} #åœ–å½¢å…§éƒ¨çš„å¡«æ»¿é¡è‰²é…ç½®é …ç›®,ä½¿ç”¨**scaleæ‡‰ç”¨æ–¼color**ä»¥ç²å¾—c
        },
        "update": {  #æ›´æ”¹æ™‚æ›´æ–°è¨­ç½®ï¼Œæ›´æ–°é¡è‰²(è¿”å›åˆ°å…¶åŸå§‹é¡è‰²)
          "fillOpacity": {"value": 1}  #åœ–å½¢å…§éƒ¨çš„ä¸é€æ˜åº¦å€¼ï¼š[0-1]
        },
        "hover": { #é¼ æ¨™æ‡¸åœæ™‚çŸ©å½¢æ›´æ”¹å¡«å……é¡è‰²
          "fillOpacity": {"value": 0.5}  #åœ–å½¢å…§éƒ¨çš„ä¸é€æ˜åº¦å€¼ï¼š[0-1]
        }
      }
    }
  ]
}

